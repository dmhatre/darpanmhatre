<!DOCTYPE html>
<html>
  <head>
    <title>dmhatre :: Spring Boot MySQL</title>
    <meta name="description" content="The personal website of Darpan Mhatre, a software evangelist who enjoys learning and implementing new technologies">
	<meta name="ROBOTS" content="INDEX, FOLLOW">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="keywords" content="Darpan Mhatre, serverless architecture, aws, amazon web services, elastic beanstalk, elasticbeanstalk, spring boot, spring boot with mysql, spring boot mysql, spring boot oauth2, spring boot with oauth2, oauth2, facebook oauth2, oauth, single sign on, sso, install node.js, create node.js server, use screen command, Java Servlet, Spring 4 MVC, Spring MVC, Spring, MVC, Tomcat, Tomcat 7, eclipse tomcat plugin">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="../lib/bootstrap/css/bootstrap.min.css" rel="stylesheet"></link>
	<script src="../js/jquery-1.9.1.js" type="text/javascript"></script>
	<script src="../lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <style>
      .navbar-inverse {
    	background-color: #563D7C;
    	border-color: #563D7C;
      }
      .navbar-inverse .navbar-nav > .active > a, 
      .navbar-inverse .navbar-nav > .active > a:hover, 
      .navbar-inverse .navbar-nav > .active > a:focus {
    	background-color: #FF803E;
    	color: #FFFFFF;
      }
      .navbar-inverse .navbar-nav > .open > a, 
      .navbar-inverse .navbar-nav > .open > a:hover, 
      .navbar-inverse .navbar-nav > .open > a:focus {
     	background-color: #FF803E;
    	color: #FFFFFF;
      }
    </style>
    <script>
    /*    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-48004119-1', 'dmhatre.com');
    ga('send', 'pageview');*/
     var _gaq = _gaq || [];
     _gaq.push(['_setAccount', 'UA-48004119-1']);
     _gaq.push(['_setDomainName', 'none']);
     _gaq.push(['_setAllowLinker', true]);
     _gaq.push(['_trackPageview']);

     (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();
	</script>
  </head>
  <body style="background-color:#9AD2FF;">
    <div class="container-fluid">
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Darpan Mhatre</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse" style="padding-right:20px;">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/">Home</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              Resume
              <b class="caret"></b></a>
              <ul class="dropdown-menu">
              	<li><a href="/downloadresume">Download Resume</a></li>
                <li><a href="/summary">Summary</a></li>
                <li><a href="/skills">Skills</a></li>
                <li><a href="/experience">Experience</a></li>
                <li><a href="/education">Education</a></li>
              </ul>
            </li>
            <li><a href="#myModal" data-toggle="modal">Video Resume</a></li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/awselasticbeanstalk">AWS Elastic Beanstalk</a></li>
                <li><a href="/springbootmysql">Spring Boot with Mysql</a></li>
                <li><a href="/spring4mvc">Spring 4 MVC</a></li>
                <li><a href="/javaservlet">Java Servlet</a></li>
                <li><a href="/installnode">Installing nodejs on ubuntu 12</a></li>
                <li><a href="/createnodejsserver">Create simple nodejs server</a></li>
                <li><a href="/usescreen">Screen</a></li>
                <li><a href="/installredis">Install Redis</a></li>
                <li><a href="/springbootoauth2">Spring Boot with OAuth2</a></li>
              </ul>
            </li>
            <li><a href="/contactinfo">Contact Info</a></li>
            <li><a href="/d3jsdemo">Demo d3js</a></li>
          </ul>
        </div>
    </nav>
    <div class="row" style="padding-top:51px;">
    	<div class="col-md-1"></div>
    	<div class="col-md-10">
        <h2>The following step-by-step tutorial will guide you to build a simple web application using spring boot and MySQL</h2>
        <h4>Note</h4>
       	<ul>
           <li>This tutorial assumes you have installed MySQL</li>
        </ul>
        <h4>Requirements</h4>
        <ul>
           <li>Eclipse Oxygen</li>
           <li>Java 1.8</li>
        </ul>
        <h3>1&#93; Create eclipse maven project</h3>
        <ul>
			<li>Open eclipse oxygen, go to File&#45;&#62;New&#45;&#62;Project</li>
			<li>Maven&#45;&#62;Maven Project&#45;&#62;click Next</li>
			<li>Make sure you select checkbox &#34;Create a simple project &#40;skip archetype selection&#41;&#34;</li>
			<li>click Next</li>
		</ul>
		<img src="../img/springbootmysql/step1-1.png" width="100%" height="100%" />
		<div style="height:20px;"></div>
		<ul>
			<li>Provide Group Id and Artifact Id and click Finish</li>
			<li>Note&#58; If you need to deploy it to Amazon web services elasticstalkbean, make sure you put artifact id as application</li>
		</ul>
		<img src="../img/springbootmysql/step1-2.png" width="100%" height="100%" />
		<div style="height:20px;"></div>
		<ul>
			<li>The project created will have directory structure as per below screenshot</li>
		</ul>
		<img src="../img/springbootmysql/step1-3.png" width="100%" height="100%" />
		<h3>2&#93; Add dependencies to pom.xml</h3>
		<p>First we need to add spring-boot-starter-parent as parent under project. It is used for default configuration of the components</p>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&nbsp;&nbsp;&#60;parent&#62;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&#60;groupId&#62;org.springframework.boot&#60;&#47;groupId&#62;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&#60;artifactId&#62;spring-boot-starter-parent&#60;&#47;artifactId&#62;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&#60;version&#62;1.5.8.RELEASE&#60;&#47;version&#62;<br>
  		&nbsp;&nbsp;&#60;&#47;parent&#62;<br>
		</p>
		</div>
		<div style="height:20px;"></div>
		<ul>
			<li>Add the java version used under project</li>
		</ul>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&#60;properties&#62;<br>
       	&#60;java.version&#62;1.8&#60;&#47;java.version&#62;<br>
       	&#60;project.build.sourceEncoding&#62;UTF-8&#60;&#47;project.build.sourceEncoding&#62;<br>
		&#60;&#47;properties&#62;<br>
		</p>
		</div>
		<div style="height:20px;"></div>
		<ul>
			<li>Add dependencies under the project. This is used for default configuration of MVC web application</li>
		</ul>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&#60;dependency&#62;<br>
       	&#60;groupId&#62;org.springframework.boot&#60;&#47;groupId&#62;<br>
       	&#60;artifactId&#62;spring-boot-starter-web&#60;&#47;artifactId&#62;<br>
		&#60;&#47;dependency&#62;<br>
		</p>
		</div>
		<div style="height:20px;"></div>
		<ul>
			<li>Finally lets add the maven plugin to build the application</li>
		</ul>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&#60;build&#62;<br>
		&#60;plugins&#62;<br>
		&#60;plugin&#62;<br>
       	&#60;groupId&#62;org.springframework.boot&#60;&#47;groupId&#62;<br>
       	&#60;artifactId&#62;spring-boot-maven-plugin&#60;&#47;artifactId&#62;<br>
       	&#60;&#47;plugin&#62;<br>
       	&#60;&#47;plugins&#62;<br>
		&#60;&#47;build&#62;<br>
		</p>
		</div>
		<h3>3&#93; Create RestController</h3>
		<ul>
			<li>Right click on src&#47;main&#47;java &#45;&#62; New &#45;&#62; Package </li>
			<li>Enter any package name and click Finish</li>
		</ul>
		<img src="../img/springbootmysql/step3-1.png" width="100%" height="100%" />
		<div style="height:20px;"></div>
		<img src="../img/springbootmysql/step3-2.png" width="100%" height="100%" />
		<div style="height:20px;"></div>
		<ul>
			<li>Right click on package newly created &#45;&#62; New &#45;&#62; Class </li>
			<li>Create new class called HelloController, can be given any name, but we have to configure it when initializing spring boot application which we will see in the next step</li>
			<li>Add &#64;RestController annotation to the class name &#40;You can also use &#64;Controller to return model view, but here in this example to keep things simple we are using &#64;RestController&#41; </li>		
			<li>Lets create a method to return greetings message</li>	
		</ul>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&#64;RestController<br>
		public class HelloController &#123;<br><br>
			&#64;RequestMapping&#40;&#34;&#47;hello&#34;&#41;<br>
			public String index&#40;&#41; &#123;<br><br>
			return &#34;Greetings&#34;&#59;<br>
			&#125;<br>
		&#125;
		</p>
		</div>
		<h3>4&#93; Initializing spring boot application</h3>
		<p>Lets initialize spring boot application by creating a class in same package called Application.java, can be any name but need to have &#64;SpringBootApplicaation annotation. Here we can configure all the controller classes by passing it as an array of object</p>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&#64;SpringBootApplication<br>
		public class Application &#123;<br><br>
		
			public static void main&#40;String&#91;&#93; args&#41;&#123;<br><br>
			 Object&#91;&#93; obj = &#123;Application.class,HelloController.class&#125;&#59; <br>
			 SpringApplication.run&#40;obj, args&#41;&#59;
			&#125;<br>
		&#125;
		</p>
		</div>
		<h3>5&#93; Build and Run the application on local</h3>
		<ul>
		<li>Right click on pom.xml &#45;&#62; Run As &#45;&#62; Run Configurations</li>
		<li>Right click on Maven Build &#45;&#62; New</li>
		<li>Enter appropriate name</li>
		<li>Select Base directory where the application is located. For configuration you can click on Workspace</li>
		<li>Goal has to be clean install</li>
		<li>Apply</li>
		<li>Run</li>
		</ul>
		<img src="../img/springbootmysql/step5-1.png" width="100%" height="100%" />
		<div style="height:10px;"></div>
		<ul>
		<li>Similarly, lets create another maven build except the Goal now has to be Spring-boot:run</li>
		<li>Apply</li>
		<li>Run</li>
		</ul>
		<img src="../img/springbootmysql/step5-2.png" width="100%" height="100%" />
		<ul>
		<li>You should see similar message, which says Tomcat started on port&#40;s&#41;: 8080&#40;http&#41;</li>
		<li>Now you can open a web browser open http:&#47;&#47;localhost:8080&#47;hello and you should see the message &#34;Greetings&#34;</li>
		</ul>
		<img src="../img/springbootmysql/step5-3.png" width="100%" height="100%" />
		<h3>6&#93; Connection to MySQL</h3>
		<p>Now lets connect to MySQL server. In this example we are gettng the user name from user table by user id and display the greetings</p>
		<p>Lets revisit pom.xml and add dependencies related to JDBC and MySQL</p>
		<p>Add JDBC and MySQL dependencies</p>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&nbsp;&nbsp;&#60;dependency&#62;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&#60;groupId&#62;org.springframework.boot&#60;&#47;groupId&#62;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&#60;artifactId&#62;spring-boot-starter-jdbc&#60;&#47;artifactId&#62;<br>
  		&nbsp;&nbsp;&#60;&#47;dependency&#62;<br>
  		&nbsp;&nbsp;&#60;dependency&#62;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&#60;groupId&#62;mysql&#60;&#47;groupId&#62;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&#60;artifactId&#62;mysql-connector-java&#60;&#47;artifactId&#62;<br>
  		&nbsp;&nbsp;&#60;&#47;dependency&#62;<br>
		</p>
		</div>
		<div style="height:20px;"></div>
		<ul>
		<li>Lets go back to HelloController.java and autowire the JdbcTemplate and write a code to review user name from the database</li>
		</ul>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		&#64;RestController<br>
		public class HelloController &#123;<br><br>

		&#64;Autowired<br>
		private JdbcTemplate jdbcTemplate&#59;<br><br>

		&#64;RequestMapping&#40;&#34;&#47;hello&#34;&#41;<br>
		public String index&#40;&#41;&#123;<br><br>

		DataSource ds = jdbcTemplate.getDataSource&#40;&#41;&#59;<br>
		Connection con = null&#59;<br>
		String s = null&#59;<br>
		try &#123;<br>
			con = ds.getConnection&#40;&#41;&#59;<br>
			Statement st = con.createStatement&#40;&#41;&#59;<br>
			ResultSet rs = st.executeQuery&#40;&#34; select first_name from t_user_main where user_id = 1 &#34;&#41;&#59;<br>
			while&#40;rs.next&#40;&#41;&#41; &#123;<br>
				s = rs.getString&#40;1&#41;&#59;<br>
				System.out.println&#40;s&#41;&#59;<br>
			&#125;<br>
		&#125; catch &#40;SQLException e&#41; &#123;<br>
			e.printStackTrace&#40;&#41;&#59;<br>
		&#125;<br><br>

		return &#34;Greetings &#34;&#43;s&#59;<br>
		&#125;<br><br>

		&#125;<br>
		</p>
		</div>
		<div style="height:20px;"></div>
		<ul>
		<li>Now this is the important step where we configure the application properties</li>
		<li>Lets create application.properties file under src&#47;main&#47;resources</li>
		<li>Lets first change the port to 5000</li>
		</ul>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		server.port=5000
		</p>
		</div>
		<div style="height:20px;"></div>
		<ul>
		<li>Now lets add MySQL connection properties</li>
		</ul>
		<p>Example</p>
		<div style="background-color:#FFFFFF;padding:10px;border:1px dashed #563D7C;">
		<p>
		spring.datasource.driver-class-name=com.mysql.jdbc.Driver<br>
		spring.datasource.url=jdbc:mysql:&#47;&#47;awsdbinstance.xxxxxx.us-west-2.rds.amazonaws.com:3306&#47;default<br>
		spring.datasource.username=awsuser<br>
		spring.datasource.password=awsuserpassword<br>
		</p>
		</div>
		<div style="height:20px;"></div>
		<img src="../img/springbootmysql/step6-1.png" width="100%" height="100%" />
		<div style="height:20px;"></div>
		<ul>
		<li>Now if you build and run application again, you will notice that the application has been started on port 5000</li>
		</ul>
		<img src="../img/springbootmysql/step6-2.png" width="100%" height="100%" />
		<div style="height:20px;"></div>
		<ul>
		<li>Now lets open the web browser and enter http:&#47;&#47;localhost:5000&#47;hello and you should see the greetings message followed by the user name retrieved from database</li>
		</ul>
		<img src="../img/springbootmysql/step6-3.png" width="100%" height="100%" />
		<div style="height:20px;"></div>
		</div>
        <div class="col-md-1"></div>
    </div>
    </div>
    <div id="myModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Video Resume</h4>
                </div>
                <div class="modal-body">
                    <p>Coming soon, Keep watching this space.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
  </body>
</html>