<!DOCTYPE html>
<html>
  <head>
    <title>dmhatre :: Admin</title>
    <meta name="description" content="The personal website of Darpan Mhatre, a software evangelist who enjoys learning and implementing new technologies">
	<meta name="ROBOTS" content="INDEX, FOLLOW">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="keywords" content="Darpan Mhatre, install node.js, create node.js server, use screen command, Java Servlet">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="../lib/bootstrap/css/bootstrap.min.css" rel="stylesheet"></link>
	<script src="../js/jquery-1.9.1.js" type="text/javascript"></script>
	<script src="../lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <style>
      .navbar-inverse {
    	background-color: #563D7C;
    	border-color: #563D7C;
      }
      .navbar-inverse .navbar-nav > .active > a, 
      .navbar-inverse .navbar-nav > .active > a:hover, 
      .navbar-inverse .navbar-nav > .active > a:focus {
    	background-color: #FF803E;
    	color: #FFFFFF;
      }
      .navbar-inverse .navbar-nav > .open > a, 
      .navbar-inverse .navbar-nav > .open > a:hover, 
      .navbar-inverse .navbar-nav > .open > a:focus {
     	background-color: #FF803E;
    	color: #FFFFFF;
      }
      #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAsKEEQTwfOVlfWxiFtuQmdduVyxXIY7ME&v=3.exp&sensor=false"></script>
    <script>
    
    function initialize() {
    	
    	$.get( "/getIPAddresses", function( data ) {
    		var map;
			var bounds = new google.maps.LatLngBounds();
			var map = new google.maps.Map(document.getElementById("map-canvas"));
			var marker;
			
			var infoWindow = new google.maps.InfoWindow({
				content: "-"
			});
			
			for(var i=0; i < data.length; i++) {
			    
				if(data[i].lat == null || data[i].lon == null) {
					console.log("#### "+data[i].country+" #### "+data[i].city);
				}
				var position = new google.maps.LatLng(data[i].lat, data[i].lon);
			    bounds.extend(position);
			    marker = new google.maps.Marker({
			    	position: position,
			       	map: map,
			        title: data[i].ip
			    });
			    google.maps.event.addListener(marker, 'click', (function(marker, i) {
		            return function() {
		                infoWindow.setContent('<div class="info_content">Country : '+data[i].country+' </br>city : '+data[i].city+' </br>ip : '+data[i].ip+'</div>');
		                infoWindow.open(map, marker);
		            }
		        })(marker, i));
			    map.fitBounds(bounds);
			}
    	});
    }
	google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    <script>
    /*    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-48004119-1', 'dmhatre.com');
    ga('send', 'pageview');*/
     var _gaq = _gaq || [];
     _gaq.push(['_setAccount', 'UA-48004119-1']);
     _gaq.push(['_setDomainName', 'none']);
     _gaq.push(['_setAllowLinker', true]);
     _gaq.push(['_trackPageview']);

     (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();
	</script>
  </head>
  <body style="background-color:#9AD2FF;">
    <div class="container-fluid">
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Darpan Mhatre</a>
        </div>
    </nav>
    <div class="row" style="padding-top:51px;">
    	 <div class="col-md-1"></div>
    	 <div id="map-canvas" class="col-md-10" style="height:600px;margin-top:31px">
    	 <div class="col-md-1"></div>
    </div>
    </div>
    </div>
  </body>
</html>